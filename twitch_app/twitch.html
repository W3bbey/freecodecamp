<!DOCTYPE html>
<head>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<html>
    
<script>
	
	// Global vars

	var channel_names = ["NoObjectiveGamingAU", "ESL_SC2", "OgamingSC2", "cretetion", "freecodecamp", "storbeck", "habathcx", "RobotCaleb", "noobs2ninjas"];
	//var channel_names = ["OgamingSC2", "NoObjectiveGamingAU"];
	var liveChannels = [];
	var offlineChannels = [];
	var streamDetails = [];
	var channelDetails = [];
	var html = "";



	$(document).ready(function () {


		// how about a button to get the status rather than document.ready?
		for (var i = 0; i < channel_names.length;i++) {
			
			$.getJSON('https://wind-bow.glitch.me/twitch-api/streams/' + channel_names[i], function(streamData) {
				
				streamDetails.push(streamData);
			
			});
			
			$.getJSON('https://wind-bow.glitch.me/twitch-api/channels/' + channel_names[i], function(channelData) {
				
				channelDetails.push(channelData);
			});
		}
		
		$("#getMessage").on("click", function() {
			
			// For some reason this stuff can't go in the document.ready place...		
			// Maybe try to clean up liveChannels and offlineChannels to push only the 
			// name of the channel to an array so I know I have an array only containing the names
			// of the channels separated by live and offline.
			
			liveChannels = streamDetails.filter(function(channel){
				return(channel.stream != null)
				
			});
			
			offlineChannels = streamDetails.filter(function(channel){
				return(channel.stream == null);
			});

			console.log(liveChannels);
			console.log(offlineChannels)
			
			for (var i = 0; i < channel_names.length; i++){
				//alert(channel_names[i]);
				
			}
			

			$("#message").html();

		});

	

		/* $("#getMessage").on("click", function() {
			
			html = "";
			
			

			for (var i = 0; i < channel_names.length; i++) {
				
				
				$.getJSON('https://wind-bow.glitch.me/twitch-api/streams/' + channel_names[i], function(streamData) {

					console.log(streamData);

					if (streamData.stream != null) {	
						html += "<div class='streamer'>"
						html += "<img src= '" + streamData.stream.channel.logo + "'" + "height='50' width='50'>";
						html += "<p>" + streamData.stream.channel.display_name + "</p>";
						html += "<p>Viewers: " + streamData.stream.viewers + "</p>";
						if (streamData.stream.channel.mature == true) {
							html += "<p>Mature Channel: yes</p>";
						} else {
							html += "<p>Mature Channel: no</p>";
						}
						html += "<a href='" + streamData.stream.channel.url + "'>" + streamData.stream.channel.status + "</a>";
						html += "<p>Live now!</p>";
						html += "</div>";

						$("#message").html(html);
				
					} else {
						//alert(i);
						//alert(channel_names[i]);
						$.getJSON('https://wind-bow.glitch.me/twitch-api/channels/' + channel_names[i], function(channelData) {
							html += "<div class='streamer'>"
							html += "<img src= '" + channelData.logo + "'" + "height='50' width='50'>";
							html += "<p>" + channelData.display_name + "</p>";
							html += "<p>Offline</p>"
							html += "<p>Followers: " + channelData.followers + "</p>";
							$("#message").html(html);
						});
					}		
				
				});
			};
		}); */
	});

</script>

    <body>
        
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6 col-md-offset-3" style="text-align: center">
                    
                    <p id="message" class="well">This is where the message goes</p>
					<button id="getMessage" class="btn btn-primary">CLICK MEH</button>
					<button id="getOnline" class="btn btn-primary">NO CLICK MEH</button>

                </div>
            </div>
        </div>


    </body>


</html>



<style>
	.streamer {
		color: black;
		text-align: left;
	}
</style>